# ********************************************
# ********************************************
# Pour Margarine de type B :
# Amélioration moyenne en 4 semaines :
mean(typeB$Before - typeB$After4weeks)
# écart-type d'amélioration moyenne en 4 semaines:
sd(typeB$Before - typeB$After4weeks)
# Amélioration moyenne en 8 semaines :
mean(typeB$Before - typeB$After8weeks)
# écart-type :
sd(typeB$Before - typeB$After8weeks)
# ********************************************
# Création des plots. Pour ce faire, on utilise les données sous format 'tall'
ggplot(melted.all, aes(ID,value, col=variable))+
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("variation du taux de Cholestérol par patient, tout type de margarine confondu")
# Création des plots. Pour ce faire, on utilise les données sous format 'tall'
ggplot(melted.all, aes(ID,value, col=variable))+
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, tous types de margarine confondu")
#   +stat_smooth()
ggplot(melted.typeA, aes(ID,value, col=variable)) +
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, margarine de type A")
ggplot(melted.typeB, aes(ID,value, col=variable)) +
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, margarine de type B")
"
Readme sur le dataset :
A study tested whether cholesterol was reduced after using a certain brand of margarine as part of a low fat, low cholesterol diet.
The subjects consumed on average 2.31g of the active ingredient, stanol easter, a day. This data set contains information on 18 people
using margarine to reduce cholesterol over three time points.
"
"Le premier [exercice] a pour but de faire une analyse de
visualisation avec R pour présenter la problématique générale"
"
Readme sur le dataset :
A study tested whether cholesterol was reduced after using a certain brand of margarine as part of a low fat, low cholesterol diet.
The subjects consumed on average 2.31g of the active ingredient, stanol easter, a day. This data set contains information on 18 people
using margarine to reduce cholesterol over three time points.
"
# installation des packages si besoin:
# install.packages("readr")
# install.packages("reshape2")
# install.packages("ggplot2")
#import des packages
library(readr)      #lecteur de csv
library(reshape2)   #fonction melt
library(ggplot2)    #plotting
#charger les données du csv dans une variable 'cholcsv'
cholcsv = read.csv("./data/Cholesterol_R.csv", header=TRUE, fileEncoding = 'UTF-8-BOM')
#si le path du csv n'est pas valide, utiliser file.choose()
# cholcsvfile = read.csv(file.choose(), header=TRUE, fileEncoding = 'UTF-8-BOM')
#avant de passer à la suite, il est important d'explorer un peu le CSV
#l'explorateur de variable de rstudio est bien pour cela.
#récupérer le header du fichier dans une variable 'header'
header = colnames(cholcsv)
header
#summary donne des stats rapides sur les colonnes
#la première colonne 'id' est exclue des stats (pas de sens de faire des stats sur un id autoincrémenté)
summary(cholcsv[-1])
#utilisation de la fonction table pour voir les catégories de la colonne 'Margarine'
table(cholcsv$Margarine)
"
Il y a deux types de margarine dans le dataset : A et B
il faut faire 3 jeux de data :
- Un pour le type A
- Un pour le type B
- Un avec les deux types mélangés
Pour voir si on peut observer des différences
"
typeA = cholcsv[cholcsv$Margarine=="A",]
typeB = cholcsv[cholcsv$Margarine=="B",]
#passer les données en format "Tall" pour plotter
melted.all = melt(cholcsv[-5], id.vars="ID")
melted.typeA = melt(typeA[-5], id.vars="ID")
melted.typeB = melt(typeB[-5], id.vars="ID")
# Définition d'une palette custom pour les plots
mypalette <- c("#9593FA", "#DC77F6", "#FF65C8")
shapevector = c(3,4)
# Création des plots. Pour ce faire, on utilise les données sous format 'tall'
ggplot(melted.all, aes(ID,value, col=variable))+
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, tous types de margarine confondu")
#   +stat_smooth()
ggplot(melted.typeA, aes(ID,value, col=variable)) +
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, margarine de type A")
ggplot(melted.typeB, aes(ID,value, col=variable)) +
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, margarine de type B")
# Faire une ANOVA pour chercher différence type A et type B ?
# Faire une petite comparaison aux amélioration moyennes attendues avec statines ?
# ********************************************
# Pour tous types de margarine confondus :
# Amélioration moyenne en 4 semaines :
mean(cholcsv$Before - cholcsv$After4weeks)
# écart-type d'amélioration moyenne en 4 semaines:
sd(cholcsv$Before - cholcsv$After4weeks)
# Amélioration moyenne en 8 semaines :
mean(cholcsv$Before - cholcsv$After8weeks)
# écart-type :
sd(cholcsv$Before - cholcsv$After8weeks)
# ********************************************
# ********************************************
# Pour Margarine de type A :
# Amélioration moyenne en 4 semaines :
mean(typeA$Before - typeA$After4weeks)
# écart-type d'amélioration moyenne en 4 semaines:
sd(typeA$Before - typeA$After4weeks)
# Amélioration moyenne en 8 semaines :
mean(typeA$Before - typeA$After8weeks)
# écart-type :
sd(typeA$Before - typeA$After8weeks)
# ********************************************
# ********************************************
# Pour Margarine de type B :
# Amélioration moyenne en 4 semaines :
mean(typeB$Before - typeB$After4weeks)
# écart-type d'amélioration moyenne en 4 semaines:
sd(typeB$Before - typeB$After4weeks)
# Amélioration moyenne en 8 semaines :
mean(typeB$Before - typeB$After8weeks)
# écart-type :
sd(typeB$Before - typeB$After8weeks)
# ********************************************
#import des packages
library(readr)      #lecteur de csv
library(reshape2)   #fonction melt
library(ggplot2)    #plotting
cholcsv = read.csv("./data/Cholesterol_R.csv", header=TRUE, fileEncoding = 'UTF-8-BOM')
#import des packages
library(readr)      #lecteur de csv
library(reshape2)   #fonction melt
library(ggplot2)    #plotting
#charger les données du csv dans une variable 'cholcsv'
cholcsv = read.csv("./data/Cholesterol_R.csv", header=TRUE, fileEncoding = 'UTF-8-BOM')
#si le path du csv n'est pas valide, utiliser file.choose()
# cholcsvfile = read.csv(file.choose(), header=TRUE, fileEncoding = 'UTF-8-BOM')
#récupérer le header du fichier dans une variable 'header'
header = colnames(cholcsv)
header
#summary donne des stats rapides sur les colonnes
#la première colonne 'id' est exclue des stats (pas de sens de faire des stats sur un id autoincrémenté)
summary(cholcsv[-1])
#utilisation de la fonction table pour voir les catégories de la colonne 'Margarine'
table(cholcsv$Margarine)
change4w = with(cholcsv, After4weeks - Before)
cholcsv$change4w = with(cholcsv, After4weeks - Before)
View(cholcsv)
View(cholcsv)
cholcsv = read.csv("./data/Cholesterol_R.csv", header=TRUE, fileEncoding = 'UTF-8-BOM')
cholcsv$change4w = with(cholcsv, After4weeks - Before)
cholcsv$change8w = with(cholcsv, After8weeks - Before)
View(cholcsv)
typeA = cholcsv[cholcsv$Margarine=="A",]
typeB = cholcsv[cholcsv$Margarine=="B",]
View(typeA)
melted.all = melt(cholcsv[-5], id.vars="ID")
mypalette <- c("#9593FA", "#DC77F6", "#FF65C8")
ggplot(melted.all, aes(ID,value, col=variable))+
geom_point(shape=3) +
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, tous types de margarine confondu")
# Création des plots. Pour ce faire, on utilise les données sous format 'tall'
ggplot(melted.all, aes(ID,value, col=variable))+
geom_point(shape=3) +
ggtitle("Variation du taux de Cholestérol par patient, tous types de margarine confondu")
barplot(cholcsv,
col=colors()[c("#9593FA", "#DC77F6")] ,
border="white",
space=0.04,
font.axis=2,
xlab="group")
barplot(cholcsv,
border="white",
space=0.04,
font.axis=2,
xlab="group")
myvars = c("ID", "change4w", "change8w")
melted.all = melt(cholcsv[myvars], id.vars="ID")
View(melted.all)
barplot(melted.all,
border="white",
space=0.04,
font.axis=2,
xlab="group")
barplot(melted.all, aes(ID,value, col=variable)
border="white",
space=0.04,
font.axis=2,
xlab="group")
barplot(melted.all, aes(ID,value, col=variable),
border="white",
space=0.04,
font.axis=2,
xlab="group")
cholcsv[myvars]
t(cholcsv[myvars])
barplot(t(cholcsv[myvars]))
myvars = c( "change4w", "change8w")
barplot(t(cholcsv[myvars]))
barplot(t(cholcsv[myvars]),
border="white",
space=0.04,
font.axis=2)
barplot(t(cholcsv[c("change4w", "change8w")]),
border="white",
space=0.04,
font.axis=2)
barplot(t(cholcsv[c("change4w", "change8w")]),
border="white",
space=0.04,
font.axis=2)
barplot(t(cholcsv[c("change4w", "change8w")]),
border="white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
border="white",
space=0.04)+
coord_flip()
barplot(t(cholcsv[c("change4w", "change8w")]),
border="white",
space=0.04) +
legend("topright",
legend = c("Group 1", "Group 2"),
fill = c("#1b98e0", "#353436"))
barplot(t(cholcsv[c("change4w", "change8w")]),
border="white",
space=0.04) +
barplot(t(cholcsv[c("change4w", "change8w")]),
border="white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")], las=2),
border="white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")],
main="Car makes",
ylab="Freqency",
xlab="make",
border="white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")], main="Car makes",
ylab="Freqency",
xlab="make",
border="white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")], main="Car makes",ylab="Freqency",xlab="make",border="white", space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Car makes",
ylab="Freqency",
xlab="make",
border="white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Car makes",
ylab="Freqency",
xlab="make",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Car makes",
ylab="Freqency",
xlab="make",
border = "white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab="Freqency",
xlab="make",
border = "white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab="Cholestérolémie",
xlab="make",
border = "white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
las=1,
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
las=3,
space=0.04)
barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
las=1,
space=0.04)
bp = barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
las=1,
space=0.04)
bp + coord_flip()
# Création des plots. Pour ce faire, on utilise les données sous format 'tall'
ggplot(melted.all, aes(ID,value, col=variable))+
geom_point(shape=3) +
scale_colour_manual(values=mypalette)+
scale_colour_manual(values=mypalette) +
ggtitle("Variation du taux de Cholestérol par patient, tous types de margarine confondu")
bp = barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
las=1,
space=0.04) +
scale_colour_manual(values=mypalette)
bp = barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
las=1,
legend=rownames(data),
space=0.04)
boxplot(cholcsv$change4w)
boxplot(cholcsv$change4w, cholcsv$change8w)
boxplot(cholcsv$change4w, cholcsv$change8w, las=1,)
boxplot(cholcsv$change4w, cholcsv$change8w, las=1)
boxplot(cholcsv$change4w, typeA$change4w, typeB$change4w, las=1)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w, las=1)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w, las=1, ylim=0)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
notch=TRUE)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1
varwidth = TRUE)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE)
boxplot(cholcsv$change4w, typeA$change4w, typeB$change4w,
las=1)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
names = c("Types A et B", "Type A", "TypeB"))
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "TypeB"))
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "TypeB"),
boxwex = 0.5
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "TypeB"),
boxwex = 0.7
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.7,
ylim=c(-1,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.7,
ylim=c(-1.3,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.7,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change4w, typeA$change4w, typeB$change4w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
main="Variation de cholestérolémie à 8 semaines par type de margarine",
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change4w, typeA$change4w, typeB$change4w,
las=1,
main="Variation de cholestérolémie à 8 semaines par type de margarine",
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las=1,
main="Variation de cholestérolémie à 8 semaines par type de margarine",
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
bp = barplot(t(cholcsv[c("change4w", "change8w")]),
main="Evolution de la cholestérolémie par patient après 4 et 8 semaines",
ylab=" Evolution de la Cholestérolémie",
xlab="make",
border = "white",
las=1,
legend=rownames(data),
space=0.04)
one.way <- aov(Margarine ~ change8w, data = cholcsv)
one.way = aov(cholcsv$Margarine ~ cholcsv$change8w, data = cholcsv)
summary(one.way)
one.way = aov(cholcsv$Margarine ~ cholcsv$change8w, data = cholcsv)
one.way = Anova(cholcsv$Margarine ~ cholcsv$change8w, data = cholcsv)
one.way = aov(cholcsv$Margarine ~ cholcsv$change8w, data = cholcsv)
one.way = aov(change8w ~Margarine, data = cholcsv)
summary(one.way)
one.way = aov(change4w ~Margarine, data = cholcsv)
summary(one.way)
boxplot(cholcsv$change4w, typeA$change4w, typeB$change4w,
las=1,
main="Variation de cholestérolémie à 8 semaines par type de margarine",
varwidth = TRUE,
ylab= "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim=c(-1.1,0)
)
boxplot(cholcsv$change8w, typeA$change8w, typeB$change8w,
las = 1,
main ="Variation de cholestérolémie à 8 semaines par type de margarine",
varwidth = TRUE,
ylab = "Variation de Cholestérolémie",
names = c("Types A et B", "Type A", "Type B"),
boxwex = 0.8,
ylim = c(-1.1,0)
)
one.way = aov(change8w ~Margarine, data = cholcsv)
summary(one.way)
one.way = aov(change4w ~Margarine, data = cholcsv)
summary(one.way)
